# 单设备快速切换测试强制提醒功能

## 🎯 测试方案

使用**一台设备**（模拟器或真机），通过**快速切换账号**完成完整的强制提醒功能测试。

### 优势
- ✅ 只需一台设备
- ✅ 操作简单直接
- ✅ 适合快速验证功能
- ✅ 可以验证通知栏效果

### 限制
- ⚠️ 无法实时看到提醒效果（需要在通知栏查看）
- ⚠️ 需要频繁切换账号
- ⚠️ 无法看到震动瞬间

---

## 📱 准备工作

### 启动应用

```bash
cd d:\wenjianjia2\channel-app
npx expo start --clear
```

### 打开设备

**选项1：使用 Android 模拟器**
```bash
emulator -avd Pixel_2
```

**选项2：使用真机**
- 打开 Expo Go
- 扫描终端二维码

---

## 🔄 完整测试流程（10步）

### 步骤 1️⃣：创建频道主账号

**操作**：
1. 打开应用
2. 点击"注册"
3. 填写信息：
   ```
   用户名：频道主
   手机号：13800000001
   密码：123456
   ```
4. 点击"注册"并登录

**验证**：看到登录成功，进入主界面

---

### 步骤 2️⃣：创建频道

**操作**：
1. 点击底部"个人中心"
2. 点击"创建频道"
3. 填写频道信息：
   ```
   频道名称：强提醒测试
   描述：单设备测试强制提醒
   分类：科技
   ```
4. 点击"创建"

**验证**：
- 看到"创建成功"提示
- 频道列表中出现新频道

**📝 记录**：频道名称 = `强提醒测试`

---

### 步骤 3️⃣：登出账号

**操作**：
1. 在"个人中心"页面
2. 滚动到底部
3. 点击"退出登录"
4. 确认退出

**验证**：回到登录页面

---

### 步骤 4️⃣：创建用户账号

**操作**：
1. 点击"注册"
2. 填写**不同的**信息：
   ```
   用户名：测试用户
   手机号：13800000002
   密码：123456
   ```
3. 点击"注册"并登录

**验证**：看到用户名显示为"测试用户"

---

### 步骤 5️⃣：订阅频道

**操作**：
1. 点击底部"频道广场"
2. 在搜索框输入"强提醒测试"（或在列表中找到）
3. 点击频道卡片
4. 点击"订阅"按钮

**验证**：
- 看到"订阅申请已提交，请等待频道主审核"
- 按钮变为"等待频道主审核"（橙色）

---

### 步骤 6️⃣：切换回频道主账号

**操作**：
1. 进入"个人中心"
2. 点击"退出登录"
3. 在登录页面输入频道主账号：
   ```
   手机号：13800000001
   密码：123456
   ```
4. 点击"登录"

**验证**：看到用户名显示为"频道主"

---

### 步骤 7️⃣：审核订阅申请

**操作**：
1. 点击底部"消息"标签
2. 看到订阅申请通知：
   ```
   📝 订阅申请
   测试用户 申请订阅您的频道
   强提醒测试
   ```
3. 点击通知
4. 在弹出的对话框中选择会员期限："1分钟（测试）"
5. 点击"批准"

**验证**：
- 看到"审核成功"提示
- 通知消失或显示已处理

---

### 步骤 8️⃣：切换回用户账号并开启强制提醒

**操作**：
1. 进入"个人中心"
2. 点击"退出登录"
3. 登录用户账号：
   ```
   手机号：13800000002
   密码：123456
   ```
4. 进入"频道广场"
5. 找到"强提醒测试"频道，点击进入
6. **下拉刷新**页面（很重要！）
7. 看到"已订阅"状态
8. 找到"开启强制提醒"按钮（蓝色边框）
9. 点击"开启强制提醒"
10. **允许通知权限**（如果弹出）

**验证**：
- 按钮变为橙色
- 文字变为"强制提醒已开启"
- 铃铛图标变为实心

**⚠️ 注意**：如果没看到"已订阅"状态，请下拉刷新页面！

---

### 步骤 9️⃣：切换回频道主并发布内容

**操作**：
1. 进入"个人中心"
2. 点击"退出登录"
3. 登录频道主账号：
   ```
   手机号：13800000001
   密码：123456
   ```
4. 进入"频道广场"
5. 点击"强提醒测试"频道
6. 滚动到页面底部
7. 在输入框输入："这是一条测试强制提醒的消息"
8. 点击"发布"

**验证**：
- 看到"内容发布成功"
- 内容出现在列表顶部

---

### 步骤 🔟：查看通知效果

**操作**：

**方法1：查看通知栏**
1. **立即**下拉手机通知栏（从屏幕顶部向下滑动）
2. 查找新通知

**方法2：等待看到**
1. 稍等几秒
2. 应该会看到通知横幅从顶部滑下

**验证**：应该看到通知：
```
🔔 【强制提醒】强提醒测试
📢 这是一条测试强制提醒的消息
```

**✅ 如果看到这个通知，测试成功！**

---

## 📊 测试检查清单

### 账号创建
- [ ] 频道主账号创建成功（13800000001）
- [ ] 用户账号创建成功（13800000002）
- [ ] 两个账号可以正常登录登出

### 频道操作
- [ ] 频道主成功创建频道
- [ ] 用户成功找到并订阅频道
- [ ] 订阅申请状态正确显示

### 审核流程
- [ ] 频道主收到订阅申请通知
- [ ] 审核对话框正常弹出
- [ ] 会员期限选择正常
- [ ] 批准操作成功

### 强制提醒
- [ ] 用户看到"已订阅"状态
- [ ] "开启强制提醒"按钮显示
- [ ] 点击后按钮变为橙色
- [ ] 发布内容后收到通知
- [ ] 通知内容正确显示
- [ ] 通知包含特殊标识

---

## 🎯 关键验证点

### 在通知栏应该看到：

**通知标题**：
```
🔔 【强制提醒】强提醒测试
```

**通知内容**：
```
📢 这是一条测试强制提醒的消息
```

**通知特征**：
- ✅ 有特殊的铃铛图标 🔔
- ✅ 标题带有【强制提醒】标识
- ✅ 内容带有喇叭图标 📢
- ✅ 通知优先级高（可能会有横幅弹出）

---

## 💡 测试技巧

### 技巧1：快速切换账号

使用固定的账号信息，记住或保存：
```
频道主：13800000001 / 123456
用户：  13800000002 / 123456
```

### 技巧2：记录频道名称

创建频道后记下准确名称，避免后续查找困难。

### 技巧3：及时刷新

切换账号后，记得**下拉刷新**频道详情页，确保看到最新状态。

### 技巧4：保持通知权限开启

测试前确保：
- 手机通知权限已开启
- Expo Go / 应用的通知权限已允许
- 勿扰模式已关闭

### 技巧5：查看通知历史

如果错过了通知弹出，可以：
1. 下拉通知栏
2. 查看历史通知
3. 通知应该还在通知列表中

---

## 🐛 常见问题

### 问题1：切换账号后看不到"已订阅"

**原因**：页面没有刷新

**解决**：
1. 在频道详情页**下拉刷新**
2. 或退出频道重新进入
3. 确认审核已通过（在频道主账号确认）

---

### 问题2：没有收到通知

**排查步骤**：

1. **检查是否开启了强制提醒**
   - 按钮应该是橙色的
   - 文字显示"强制提醒已开启"

2. **检查通知权限**
   - 设置 → 应用 → Expo Go → 通知 → 允许

3. **检查发布是否成功**
   - 在频道主账号确认内容已发布
   - 内容出现在列表中

4. **查看通知栏**
   - 下拉通知栏
   - 查找"强提醒测试"相关通知

5. **检查勿扰模式**
   - 关闭勿扰模式
   - 确保通知声音开启

---

### 问题3：通知权限弹窗没出现

**解决方案**：

**Android**：
1. 设置 → 应用 → Expo Go
2. 权限 → 通知
3. 确保"允许通知"是开启的

**手动触发权限请求**：
1. 卸载应用重新安装
2. 或在系统设置中重置应用权限

---

### 问题4：审核后订阅状态没更新

**解决方案**：
1. 完全退出频道页面
2. 重新进入频道
3. 或下拉刷新页面
4. 确认审核确实成功了

---

## 📸 截图记录建议

测试过程中建议截图保存：

1. **频道创建成功**页面
2. **订阅申请提交**提示
3. **审核通知**界面
4. **强制提醒已开启**状态（橙色按钮）
5. **收到的通知**（通知栏截图）

这样可以作为测试凭证和问题排查依据。

---

## ⏱️ 预计测试时间

- **熟练操作**：约 5-8 分钟
- **首次测试**：约 10-15 分钟
- **含截图记录**：约 15-20 分钟

---

## ✅ 测试成功标准

如果您：

1. ✅ 成功创建了两个账号
2. ✅ 完成了订阅和审核流程
3. ✅ 开启了强制提醒（按钮变橙色）
4. ✅ 在通知栏看到了通知
5. ✅ 通知内容包含"🔔【强制提醒】"

**恭喜！单设备测试成功！** 🎉

---

## 📋 测试记录表

| 步骤 | 操作 | 完成时间 | 结果 | 备注 |
|------|------|---------|------|------|
| 1 | 创建频道主账号 | ______ | □ | |
| 2 | 创建频道 | ______ | □ | |
| 3 | 切换到用户账号 | ______ | □ | |
| 4 | 订阅频道 | ______ | □ | |
| 5 | 切换到频道主 | ______ | □ | |
| 6 | 审核通过 | ______ | □ | |
| 7 | 切换到用户 | ______ | □ | |
| 8 | 开启强制提醒 | ______ | □ | |
| 9 | 切换到频道主 | ______ | □ | |
| 10 | 发布内容 | ______ | □ | |
| 11 | 查看通知 | ______ | □ | |

**测试完成时间**：__________

**测试结果**：□ 成功  □ 失败

**问题记录**：______________________________

---

## 🚀 后续测试建议

单设备测试成功后，建议进行：

1. **双设备测试**：使用两台设备，实时观察提醒效果
2. **锁屏测试**：测试锁屏状态下的通知显示
3. **多条消息测试**：连续发送多条消息测试
4. **关闭提醒测试**：验证关闭后不再收到通知

---

## 💾 快速测试脚本

为了方便测试，这里提供测试步骤的快速参考：

```
1. 注册频道主(13800000001) → 创建频道
2. 登出 → 注册用户(13800000002) → 订阅频道
3. 登出 → 登录频道主 → 审核通过
4. 登出 → 登录用户 → 刷新 → 开启提醒
5. 登出 → 登录频道主 → 发布内容
6. 查看通知栏 → 验证通知
```

---

祝测试顺利！🎊
