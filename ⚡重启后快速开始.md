# 🚀 重启后快速开始指南

**欢迎回来！** 这是您重启后的快速操作指南。

---

## ⚡ 快速开始（5分钟内上手）

### 第1步：打开管理员PowerShell

1. 按 `Win + X` 键
2. 选择 **"Windows PowerShell (管理员)"**
3. 点击 **"是"** 允许管理员权限

### 第2步：进入项目目录

```powershell
cd d:\wenjianjia2\channel-app
```

### 第3步：查看完整构建步骤

```powershell
# 在IDE中打开构建指南
code "APK构建详细步骤.md"

# 或在终端中查看
Get-Content "APK构建详细步骤.md" | more
```

---

## 📋 完整构建流程（一键复制）

### 方案A：自动化构建（推荐）⭐⭐⭐⭐⭐

```powershell
# 1. 设置环境变量
$env:ANDROID_HOME = "E:\development\Android\sdk"

# 2. 进入项目目录
cd d:\wenjianjia2\channel-app

# 3. 清理android目录
Remove-Item -Path "android" -Recurse -Force -ErrorAction SilentlyContinue

# 4. 验证删除
if (!(Test-Path "android")) {
    Write-Host "✓ Android目录已删除" -ForegroundColor Green
} else {
    Write-Host "⚠ Android目录仍存在，尝试重命名..." -ForegroundColor Yellow
    Rename-Item -Path "android" -NewName "android.old"
}

# 5. 检查ADB连接
adb devices

# 6. 一键构建并安装（自动化）
npx expo run:android --device

# 7. 启动开发服务器（在新终端中）
# npx expo start --clear
```

### 方案B：手动构建（更可控）⭐⭐⭐⭐

```powershell
# 1-5步同上...

# 6. 重新生成Android项目
npx expo prebuild --platform android --clean

# 7. 构建APK
cd android
.\gradlew.bat assembleDebug

# 8. 安装到模拟器
cd ..
adb install -r android\app\build\outputs\apk\debug\app-debug.apk

# 9. 启动开发服务器
npx expo start --clear
```

---

## ✅ 检查清单

在开始构建前，请确认：

- [ ] 已重启计算机
- [ ] 以**管理员身份**运行PowerShell
- [ ] Android模拟器已启动（或稍后启动）
- [ ] 已进入项目目录：`d:\wenjianjia2\channel-app`

---

## 🎯 预期结果

### 成功标志

看到以下输出表示成功：

```
✓ Android项目已生成
✓ Gradle构建完成
BUILD SUCCESSFUL
✓ APK已安装
✓ 应用已启动
```

### 构建时间

- 清理和准备：**5分钟**
- 项目生成：**3-5分钟**
- Gradle构建：**15-25分钟**（首次）
- 安装和测试：**5分钟**

**总计：约30-40分钟**

---

## ⚠️ 如果遇到问题

### 问题1：仍然无法删除android目录

```powershell
# 尝试重命名而非删除
Rename-Item -Path "android" -NewName "android.old"
# 然后继续构建，expo会创建新的android目录
```

### 问题2：ADB未找到设备

```powershell
# 启动Android模拟器（如果还没启动）
# 在Android Studio中启动，或使用命令：
# emulator -avd Pixel_2

# 重启ADB
adb kill-server
adb start-server
adb devices
```

### 问题3：Gradle构建失败

```powershell
# 清理Gradle缓存
cd android
.\gradlew.bat clean
.\gradlew.bat assembleDebug

# 如果还是失败，查看详细日志
.\gradlew.bat assembleDebug --stacktrace
```

### 问题4：网络问题（下载依赖失败）

配置Gradle使用国内镜像（参见 `APK构建详细步骤.md` 中的优化部分）

---

## 📱 测试重点

APK安装成功后，请重点测试：

### 1. 退出登录功能（已修复）✨
- 进入个人中心
- 点击"退出登录"
- 验证Alert弹窗显示
- 确认后自动跳转登录页

### 2. 登录功能
- 手机号：13800138000
- 密码：123456
- 验证登录成功

### 3. 移动端特有功能
- Alert.alert() 原生弹窗
- TouchableOpacity 点击反馈
- SafeAreaView 布局适配

### 4. 频道功能
- 浏览频道广场
- 订阅/取消订阅
- 查看频道详情
- 发送消息

### 5. 私聊功能
- 点击创建者头像
- 进入私聊页面
- 发送测试消息

---

## 📖 相关文档

在项目目录中，您可以查看以下文档：

| 文档名称 | 说明 |
|---------|------|
| `APK构建详细步骤.md` | **最重要** - 完整构建流程和问题解决 |
| `工作进度保存.md` | 当前工作进度和状态 |
| `最佳测试方案.md` | 三种测试方案对比 |
| `使用指南.md` | 应用功能使用说明 |
| `功能清单.md` | 完整功能列表 |
| `退出登录功能修复说明.md` | 修复详情 |

---

## 🔍 快速命令参考

```powershell
# 查看所有文档
Get-ChildItem *.md | Select-Object Name

# 检查模拟器状态
adb devices

# 检查项目文件
Get-ChildItem -Directory

# 查看package.json
Get-Content package.json

# 查看app.json
Get-Content app.json

# 检查Node进程
Get-Process | Where-Object {$_.ProcessName -like "*node*"}
```

---

## 💡 温馨提示

1. **耐心等待**：首次Gradle构建需要15-25分钟，请耐心等待
2. **不要中断**：构建过程中不要关闭PowerShell窗口
3. **网络稳定**：确保网络连接稳定，需要下载依赖
4. **磁盘空间**：确保D盘有足够空间（建议预留5GB以上）

---

## 🎉 下一步

选择以下操作之一：

### A. 立即开始构建
```powershell
# 复制"方案A：自动化构建"中的命令
# 粘贴到管理员PowerShell中执行
```

### B. 查看详细文档
```powershell
code "APK构建详细步骤.md"
```

### C. 检查环境
```powershell
$env:ANDROID_HOME = "E:\development\Android\sdk"
adb devices
java -version
```

---

**准备好了吗？让我们开始构建吧！** 🚀

如有任何问题，请参考 `APK构建详细步骤.md` 中的"常见问题和解决方案"部分。

---

**当前项目路径**: `d:\wenjianjia2\channel-app`  
**Android SDK路径**: `E:\development\Android\sdk`  
**测试账号**: 13800138000 / 123456  

**祝构建顺利！** 🎊
